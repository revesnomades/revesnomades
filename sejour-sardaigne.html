<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>Séjour en Sardaigne — Rêves Nomades</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@300;400;500;600&family=Be+Vietnam+Pro:wght@200;300;400;500;600&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body class="on-light">

  <!-- NAV -->
  <header class="nav" id="top">
    <div class="container nav-inner">
      <a class="brand" href="index.html" aria-label="Accueil Rêves Nomades">
        <img src="assets/img/logo-reves-nomades.png" alt="Logo Rêves Nomades" />
        <span>Rêves Nomades</span>
      </a>

      <nav class="nav-links nav-links-desktop">
        <a href="index.html#apropos" data-scroll>À propos</a>
        <a href="index.html#contact" data-scroll>Contact</a>
        <a class="icon-btn" href="compte.html" aria-label="Compte">
          <svg class="icon" viewBox="0 0 24 24" fill="none">
            <path d="M20 21c0-4.418-3.582-8-8-8s-8 3.582-8 8" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
            <path d="M12 13a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9Z" stroke="white" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
        </a>
      </nav>

      <!-- Hamburger -->
      <button class="hamburger" type="button" aria-label="Ouvrir le menu" aria-expanded="false">
        <span></span><span></span><span></span>
      </button>

      <!-- Drawer mobile -->
      <div class="mobile-drawer" aria-hidden="true">
        <div class="mobile-menu">
          <a href="index.html#apropos" data-scroll>À propos</a>
          <a href="index.html#contact" data-scroll>Contact</a>
          <a href="compte.html">Compte</a>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO IMAGE -->
  <section class="sejour-hero">
    <div class="sejour-hero-bg" style="background-image:url('assets/img/sejour-sardaigne.jpg');"></div>
  </section>

  <!-- CONTENT -->
  <section class="band cream">
    <div class="container sejour-content">

      <h1 class="reveal">Séjour en Sardaigne</h1>

      <p class="sejour-meta reveal">
        5 jours · 4 nuits — <strong>à partir de 860 €</strong> / personne
      </p>

      <p class="sejour-dates reveal">
        Dates : <span id="stayDates">Dates à annoncer</span>
      </p>

      <div class="sejour-text reveal">
        <p>
          Une parenthèse méditerranéenne pour ralentir, respirer et se reconnecter — entre lumière,
          nature et douceur de vivre. La Sardaigne invite naturellement à relâcher :
          ici, on bouge en conscience, on se nourrit sainement et on retrouve un rythme plus vrai.
        </p>
        <p>
          Ce séjour est pensé comme un voyage intérieur : une structure douce, mais solide.
          Chaque journée alterne Pilates, respiration, temps de repos, découvertes locales
          et cuisine consciente. On se laisse guider, et on se retrouve.
        </p>
      </div>

      <!-- HIGHLIGHTS -->
      <section class="reveal" style="margin-top:26px;">
        <h3 style="margin:0;">Ce que tu vas vivre</h3>
        <div style="margin-top:12px; display:grid; gap:10px; color:var(--muted);">
          <div>• Pilates quotidien (tous niveaux) + mobilité / respiration</div>
          <div>• Balades & randonnées douces (selon météo) : nature, points de vue, bord de mer</div>
          <div>• Activités locales (marché, découverte du lieu, immersion au rythme local)</div>
          <div>• Cuisine saine par une cheffe + atelier cuisine (apprendre, repartir avec des idées)</div>
          <div>• Temps pour soi : journaling, sieste, lecture, silence, coucher de soleil</div>
          <div>• Option massages (en supplément) pour relâcher profondément</div>
        </div>
      </section>

      <!-- PROGRAMME -->
      <section class="reveal" style="margin-top:34px;">
        <h3 style="margin:0;">Programme (exemple — ajusté selon le groupe & la météo)</h3>

        <div style="margin-top:14px; display:grid; gap:14px;">

          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Jour 1 — Arrivée & atterrissage</div>
            <p class="sub" style="margin-top:8px;">
              Accueil, installation, boisson chaude, intention du séjour. Séance douce pour délier le corps,
              puis dîner sain et chaleureux. Soirée calme : respiration, journaling, repos.
            </p>
          </div>

          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Jour 2 — Mouvement & mer</div>
            <p class="sub" style="margin-top:8px;">
              Pilates + mobilité le matin. Brunch sain. Temps libre (repos / lecture) puis balade nature.
              Fin de journée : étirements doux / relaxation. Option massage.
            </p>
          </div>

          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Jour 3 — Cuisine consciente & énergie</div>
            <p class="sub" style="margin-top:8px;">
              Pilates tonique (adapté). Atelier cuisine avec la cheffe : apprendre à cuisiner simple, bon, sain.
              Après-midi : activité locale (marché / découverte / temps au bord de l’eau).
              Soir : dîner + cercle de partage (facultatif).
            </p>
          </div>

          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Jour 4 — Reconnexion & profondeur</div>
            <p class="sub" style="margin-top:8px;">
              Pilates + respiration. Temps long pour soi (sieste, écriture, bain de nature).
              Randonnée douce ou activité locale selon les envies. Option massage.
              Soirée “coucher de soleil” & rituel de clôture.
            </p>
          </div>

          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Jour 5 — Intégration & départ</div>
            <p class="sub" style="margin-top:8px;">
              Séance d’intégration (mobilité + stretch). Brunch. Temps pour repartir avec un plan simple :
              rituels, mouvements, idées recettes. Départs en fin de matinée / début d’après-midi.
            </p>
          </div>

        </div>

        <p class="small muted" style="margin-top:10px;">
          * Le programme exact dépend du lieu, de la météo et de l’énergie du groupe (tout en respectant la structure).
        </p>
      </section>

      <!-- SAC CADEAU -->
      <section class="reveal gift-pack">
        <div class="gift-pack-grid">

          <div class="gift-pack-text">
            <h3>Le sac cadeau Rêves Nomades</h3>

            <p class="sub" style="margin-top:10px;">
              À votre arrivée, vous recevez un sac cadeau imaginé pour prolonger l’expérience
              bien au-delà du séjour.
            </p>

            <ul class="gift-pack-list">
              <li>Tee-shirt Rêves Nomades</li>
              <li>Sac en tissu</li>
              <li>Gourde réutilisable</li>
              <li>Carnet & stylo pour l’écriture et l’introspection</li>
              <li>Un soin bien-être (surprise)</li>
            </ul>

            <p class="small muted" style="margin-top:10px;">
              Chaque élément est choisi avec soin pour vous accompagner avant,
              pendant et après le séjour.
            </p>
          </div>

          <div class="gift-pack-image">
            <img
              src="assets/img/sac-cadeau-reves-nomades.jpg"
              alt="Sac cadeau Rêves Nomades"
            />
          </div>

        </div>
      </section>

      <!-- INCLUS / NON INCLUS -->
      <section class="reveal" style="margin-top:34px;">
        <h3 style="margin:0;">Ce qui est inclus</h3>
        <div style="margin-top:12px; display:grid; gap:8px; color:var(--muted);">
          <div>• 4 nuits d’hébergement</div>
          <div>• Repas sains (petits-déj / brunch / dîners selon l’organisation)</div>
          <div>• Pilates quotidien + mobilité / stretching</div>
          <div>• 1 atelier cuisine</div>
          <div>• Activités locales (selon programme)</div>
          <div>• Sac cadeau Rêves Nomades</div>
        </div>

        <h3 style="margin:26px 0 0;">Ce qui n’est pas inclus</h3>
        <div style="margin-top:12px; display:grid; gap:8px; color:var(--muted);">
          <div>• Transport jusqu’au lieu</div>
          <div>• Massages (optionnels)</div>
          <div>• Dépenses personnelles</div>
        </div>
      </section>

      <!-- OPTIONS -->
      <section class="reveal" style="margin-top:34px;">
        <h3 style="margin:0;">Options (en supplément)</h3>
        <div style="margin-top:12px; display:grid; gap:10px; color:var(--muted);">
          <div>• Massage bien-être : 30 / 60 minutes (tarifs communiqués après réservation)</div>
          <div>• Séance supplémentaire (selon disponibilités)</div>
          <div>• Ajustements alimentaires (si besoin spécifique : à préciser à l’avance)</div>
        </div>
      </section>

      <!-- Décompte -->
      <p class="sejour-count reveal">
        Encore <strong id="missingCount">—</strong> réservations nécessaires pour valider ce séjour.
        <br>
        <span class="hint">Un email de confirmation vous sera envoyé dès que le séjour sera validé.</span>
      </p>

      <!-- Réservation -->
      <div class="booking-box reveal">
        <h3>Réserver</h3>

        <label class="kicker" for="roomSelect">Type de chambre</label>
        <select id="roomSelect" style="
          width:min(520px, 100%);
          margin-top:8px;
          padding:12px;
          border-radius:0;
          border:1px solid rgba(30,31,34,.18);
          background: rgba(255,255,255,.85);
          font-family:inherit;
          font-weight:300;
          color: var(--text);
        ">
          <option value="shared">Chambre partagée (incluse)</option>
          <option value="single">Chambre individuelle (+120€)</option>
        </select>

        <p class="small muted" style="margin-top:10px;">
          La quantité se sélectionne directement sur Stripe.
        </p>

        <div class="price-line" style="margin-top:12px; display:flex; align-items:center; justify-content:space-between;">
          <span style="color:var(--muted); font-size:13px;">Prix</span>
          <strong id="stayPriceLive">—</strong>
        </div>

        <div class="actions" style="margin-top:16px;">
          <a id="payBtn" class="btn on-light" target="_blank" rel="noopener">
            Réserver sur Stripe
          </a>
        </div>

        <p id="bookingMsg" class="small muted" style="margin-top:10px;"></p>
      </div>

      <!-- FAQ -->
      <section class="reveal" style="margin-top:34px;">
        <h3 style="margin:0;">FAQ</h3>

        <div style="margin-top:12px; display:grid; gap:12px;">
          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Niveau requis en Pilates ?</div>
            <p class="sub" style="margin-top:8px;">
              Tous niveaux. Chaque séance est adaptable : options faciles / intermédiaires / plus intenses.
            </p>
          </div>

          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Et si je viens seule ?</div>
            <p class="sub" style="margin-top:8px;">
              C’est très fréquent. L’ambiance est douce, respectueuse, et la chambre partagée est pensée
              pour être confortable.
            </p>
          </div>

          <div style="border:1px solid var(--line); background:rgba(255,255,255,.55); padding:14px;">
            <div class="kicker">Quels repas ?</div>
            <p class="sub" style="margin-top:8px;">
              Une cuisine simple, saine, gourmande. On privilégie des produits de saison et des assiettes équilibrées.
              Tu repars aussi avec des idées recettes.
            </p>
          </div>
        </div>
      </section>

      <!-- CTA bas -->
      <section class="reveal" style="margin-top:34px;">
        <p class="sub">
          Une question avant de réserver ? Écris-nous via la rubrique Contact, on te répond rapidement.
        </p>
        <div class="actions" style="margin-top:12px;">
          <a class="btn tiny on-light" href="index.html#contact">Nous contacter</a>
        </div>
      </section>

    </div>
  </section>

  <!-- FOOTER -->
  <footer class="band cream">
    <div class="container footer">

      <div class="footer-row">
        <div class="footer-brand reveal" data-delay="0">
          <img src="assets/img/logo-reves-nomades.png" alt="Rêves Nomades">
          <div style="font-family:'Playfair Display'; font-weight:500;">Rêves Nomades</div>
        </div>

        <div class="footer-social reveal" data-delay="1">
          <a class="icon-btn light" href="https://instagram.com/TON_COMPTE" target="_blank" rel="noopener" aria-label="Instagram">
            <svg class="icon" viewBox="0 0 24 24" fill="none">
              <path d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9A5.5 5.5 0 0 1 16.5 22h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2Z" stroke="currentColor" stroke-width="1.7"/>
              <path d="M12 16.2A4.2 4.2 0 1 0 12 7.8a4.2 4.2 0 0 0 0 8.4Z" stroke="currentColor" stroke-width="1.7"/>
              <path d="M17.6 6.4h.01" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
            </svg>
          </a>

          <a class="icon-btn light" href="https://facebook.com/TA_PAGE" target="_blank" rel="noopener" aria-label="Facebook">
            <svg class="icon" viewBox="0 0 24 24" fill="none">
              <path d="M14 9h3V6h-3c-2.2 0-4 1.8-4 4v3H7v3h3v6h3v-6h3l1-3h-4v-3c0-.6.4-1 1-1Z" fill="currentColor"/>
            </svg>
          </a>

          <a href="index.html#apropos" style="font-size:12px; letter-spacing:.08em; text-transform:uppercase;">À propos</a>
        </div>
      </div>

      <div class="legal reveal" data-delay="2">
        <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
          <div>Copyright © 2026 Rêves Nomades</div>
          <div>
            <a href="mentions-legales.html">Mentions légales</a> ·
            <a href="politique-confidentialite.html">Politique de confidentialité</a>
          </div>
        </div>
      </div>

    </div>
  </footer>

  <script src="assets/js/main.js"></script>

  <!-- Dates Supabase -->
  <script type="module">
    import { hydrateStayPageDate } from "./assets/js/stayDates.js";
    hydrateStayPageDate("sardaigne", "stayDates");
  </script>

  <!-- Décompte Supabase (bookings payées) -->
  <script type="module">
    import { supabase } from "./assets/js/supabaseClient.js";

    const EVENT_ID = "95b50ed8-4223-4b52-91d4-aff26e4cb228";
    const MIN_BOOKINGS = 10;

    async function loadMissing(){
      const el = document.getElementById("missingCount");
      if(!el) return;

      const { data, error } = await supabase
        .from("bookings")
        .select("places")
        .eq("event_id", EVENT_ID)
        .eq("paid", true);

      if(error){
        el.textContent = "—";
        return;
      }

      const total = (data || []).reduce((sum, b) => sum + (Number(b.places) || 0), 0);
      el.textContent = String(Math.max(0, MIN_BOOKINGS - total));
    }

    loadMissing();
  </script>

  <!-- Stripe links + prix dynamique -->
  <script>
    const BASE_PRICE = 860;
    const SINGLE_EXTRA = 120;

    const STRIPE_LINKS = {
      shared: "https://buy.stripe.com/test_00w8wJgprgME1tjc3q0ZW0g",
      single: "https://buy.stripe.com/test_6oU4gta139kc5Jz8Re0ZW0f"
    };

    const sel = document.getElementById("roomSelect");
    const btn = document.getElementById("payBtn");
    const msg = document.getElementById("bookingMsg");
    const priceEl = document.getElementById("stayPriceLive");

    function formatEUR(n){
      return new Intl.NumberFormat("fr-FR", { style:"currency", currency:"EUR" }).format(n);
    }

    function syncBooking(){
      const room = sel.value;
      const link = STRIPE_LINKS[room];

      const price = room === "single" ? (BASE_PRICE + SINGLE_EXTRA) : BASE_PRICE;
      priceEl.textContent = formatEUR(price);

      if(!link){
        btn.removeAttribute("href");
        msg.textContent = "Lien Stripe manquant pour ce type de chambre.";
        return;
      }
      btn.href = link;
      msg.textContent = "";
    }

    sel.addEventListener("change", syncBooking);
    syncBooking();
  </script>

</body>
</html>